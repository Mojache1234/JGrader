<% if (typeof rows == 'undefined') { %>
<!-- Need to implement a way of getting section name not related to rows-->
<h1> Some kind of Error has happened</h1>
<% } else { %>
<div class="page-header">
  <% console.log(rows) %>
  <h1> <%= rows[0].name %> </h1>
</div>

<% if(rows.length == 0) { %>
    <h1>Some Error has occured/td>
<% } else { %>

<div class="table-responsive">
  <table class="table table-striped">
      <thead>
        <tr>
          <th>Description</th>
          <th>Due</th>
          <th>Done</th>
        </tr>
      </thead>
      <tbody>
              <tr>
                <td><%= rows[0].description%></td>
                <td><%= rows[0].due%></td>
              </tr>
      </tbody>
    </table>
</div>

<% if (typeof fileData == 'undefined') { %>
    <div class="col-lg-7 tester" id="actions">
        <!-- The fileinput-button span is used to style the file input field as button -->
        <span class="btn btn-success fileinput-button dz-clickable">
            <i class="glyphicon glyphicon-plus"></i>
            <span>Add files...</span>
        </span>
        <button type="submit" class="btn btn-primary start">
            <i class="glyphicon glyphicon-upload"></i>
            <span>Start upload</span>
        </button>
        <button type="reset" class="btn btn-warning cancel">
            <i class="glyphicon glyphicon-ban-circle"></i>
            <span>Cancel upload</span>
        </button>
    </div>

    <!-- HTML heavily inspired by http://blueimp.github.io/jQuery-File-Upload/ -->
    <div class="col-md-7 table table-striped" class="files" id="previews">

      <div id="template" class="file-row">
        <!-- This is used as the file preview template -->
        <div>
            <span class="preview"><img data-dz-thumbnail /></span>
        </div>
        <div>
            <p class="name" data-dz-name></p>
            <strong class="error text-danger" data-dz-errormessage></strong>
        </div>
        <div>
            <p class="size" data-dz-size></p>
            <div class="progress progress-striped active" role="progressbar" id="total-progress"aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
              <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress></div>
            </div>
        </div>

        <div>
          <!-- No Individual Start option
            <button class="btn btn-primary start">
              <i class="glyphicon glyphicon-upload"></i>
              <span>Start</span>
            </button>
          -->
          <button data-dz-remove class="btn btn-warning cancel">
              <i class="glyphicon glyphicon-ban-circle"></i>
              <span>Cancel</span>
          </button>

          <!-- Feature for delete needs to be implemented on an assignment basis
            <button data-dz-remove class="btn btn-danger delete">
              <i class="glyphicon glyphicon-trash"></i>
              <span>Delete</span>
            </button>
          -->
        </div>
      </div>

    </div>

<% } else { %>
    <!-- If student has submitted files needs resubmit -->
    <div role="tabpanel">
      <ul class="nav nav-tabs" role="tablist">
        <% for(i in fileData) { %>
          <% fileData[i].shortName = fileData[i].name.substring(0, fileData[i].name.length - 5); %>
          <li role="presentation"<%- i == 0 ? ' class="active"' : '' %>><a href="#<%= fileData[i].shortName %>" role="tab" data-toggle="tab"><%= fileData[i].name %></a></li>
          <% } %>
        </ul>
      </div>
      <div class="tab-content">
        <% for (i in fileData) { %>
          <div role="tabpanel" class="tab-pane<%= i == 0 ? ' first active' : '' %>" id="<%= fileData[i].shortName %>">
            <pre><code class="prettyprint language-java"><%= fileData[i].contents %></code></pre>
          </div>
          <% } %>
      </div>
  <% } %>
  <% } %>

<% } %>
